{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nconst gallery = document.querySelector(\".gallery\");\n\nexport function renderData(apiArray) {\n    const markup = apiArray.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>\n        `<li class=\"list-item\">\n            <a href=\"${largeImageURL}\">\n                <img class=\"list-item-img\" src=\"${webformatURL}\" alt=\"${tags}\">\n            </a>\n            <div class=\"info-container\">\n                <div class=\"list-item-container\">\n                    <h3 class=\"title\">Likes</h3>\n                    <p class=\"text\">${likes}</p>\n                </div>\n                <div class=\"list-item-container\">\n                    <h3 class=\"title\">Views</h3>\n                    <p class=\"text\">${views}</p>\n                </div>\n                <div class=\"list-item-container\">\n                    <h3 class=\"title\">Comments</h3>\n                    <p class=\"text\">${comments}</p>\n                </div>\n                <div class=\"list-item-container\">\n                    <h3 class=\"title\">Downloads</h3>\n                    <p class=\"text\">${downloads}</p>\n                </div>\n            </div>         \n        </li>\n    `).join(\"\");\n    gallery.insertAdjacentHTML(\"beforeend\", markup);\n\n    let simpBox = new SimpleLightbox(\".list-item a\", {\n        captionsData: \"alt\",\n        captionDelay: 250,\n    });\n    simpBox.refresh();\n}\n","import axios from \"axios\";\n\nconst BASE_URL = \"https://pixabay.com/api/\";\nconst API_KEY = \"46908572-03cf8a6fd9728954a0f037e03\";\n\n   \n export async function fetchData(requestValue, page = 1) {\n   const params = {\n     key: API_KEY,\n     q: requestValue,\n     image_type: \"photo\",\n     orientation: \"horizontal\",\n     safesearch: true,\n     per_page: 15,\n     page\n};\n     try {\n      const response = await axios(BASE_URL, {params: params})      \n      return response.data;\n     } catch (error) {\n      console.log(\"catch\", error);\n     }\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { fetchData } from \"./js/pixabay-api\";\nimport { renderData } from \"./js/render-functions\";\n\nconst form = document.querySelector(\".form\");\nconst loader = document.querySelector(\".loader\");\nconst gallery = document.querySelector(\".gallery\");\nconst loadMoreBtn = document.querySelector(\".load-more-btn\");\n\nform.addEventListener(\"submit\", handleSubmit);\nloadMoreBtn.addEventListener(\"click\", loadMore);\n\nlet page = 1;\nlet tempReqValue = \"\";\nconst per_page = 15;\n\nasync function loadMore(event) {\n  event.preventDefault();\n  page += 1;\n  await handleRequest();\n\n  const card = document.querySelector(\".list-item\");\n  const cardHeight = card.getBoundingClientRect().height;\n  \n  window.scrollBy({\n    left: 0,\n    top: cardHeight * 2,\n    behavior: \"smooth\"\n}) \n}\n\nfunction handleSubmit(event) {\n  event.preventDefault();\n  const requestValue = event.target.elements.request.value;\n\n  if (requestValue === \"\") {\n    return;\n  }\n\n  page = 1;\n  tempReqValue = requestValue;\n  gallery.innerHTML = \"\";\n  handleRequest();\n}\n\nasync function handleRequest() {\n  loadMoreBtn.style.display = \"none\";\n  loader.style.display = \"block\";\n  const data = await fetchData(tempReqValue, page)\n  const prepPic = data.hits;\n\n  if (prepPic.length === 0) {\n    loadMoreBtn.style.display = \"none\";\n    iziToast.error({\n      message: 'Sorry, there are no images matching your search query. Please try again!',\n      position: 'center',\n    });\n  }\n  if (page >= (data.totalHits / per_page)) {\n    iziToast.info({ message: \"We're sorry, but you've reached the end of search results.\" });\n    loadMoreBtn.style.display = \"none\";\n    loader.style.display = \"none\";\n  } else {\n    loadMoreBtn.style.display = \"block\";\n  }\n    loader.style.display = \"none\";\n    renderData(data.hits);\n    document.querySelector(\".form\").reset();\n}\n"],"names":["gallery","renderData","apiArray","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","BASE_URL","API_KEY","fetchData","requestValue","page","params","axios","error","form","loader","loadMoreBtn","handleSubmit","loadMore","tempReqValue","per_page","event","handleRequest","cardHeight","data","iziToast"],"mappings":"owBAEA,MAAMA,EAAU,SAAS,cAAc,UAAU,EAE1C,SAASC,EAAWC,EAAU,CACjC,MAAMC,EAASD,EAAS,IAAI,CAAC,CAAE,aAAAE,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IACjG;AAAA,uBACeL,CAAa;AAAA,kDACcD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,sCAKtCC,CAAK;AAAA;AAAA;AAAA;AAAA,sCAILC,CAAK;AAAA;AAAA;AAAA;AAAA,sCAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,sCAIRC,CAAS;AAAA;AAAA;AAAA;AAAA,KAI1C,EAAE,KAAK,EAAE,EACVV,EAAQ,mBAAmB,YAAaG,CAAM,EAEhC,IAAIQ,EAAe,eAAgB,CAC7C,aAAc,MACd,aAAc,GACtB,CAAK,EACO,QAAO,CACnB,CCnCA,MAAMC,EAAW,2BACXC,EAAU,qCAGR,eAAeC,EAAUC,EAAcC,EAAO,EAAG,CACtD,MAAMC,EAAS,CACb,IAAKJ,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAAC,CACL,EACK,GAAI,CAEH,OADiB,MAAME,EAAMN,EAAU,CAAC,OAAQK,CAAM,CAAC,GACvC,IAChB,OAAQE,EAAO,CACf,QAAQ,IAAI,QAASA,CAAK,CAC1B,CACN,CCjBA,MAAMC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAS,SAAS,cAAc,SAAS,EACzCrB,EAAU,SAAS,cAAc,UAAU,EAC3CsB,EAAc,SAAS,cAAc,gBAAgB,EAE3DF,EAAK,iBAAiB,SAAUG,CAAY,EAC5CD,EAAY,iBAAiB,QAASE,CAAQ,EAE9C,IAAIR,EAAO,EACPS,EAAe,GACnB,MAAMC,EAAW,GAEjB,eAAeF,EAASG,EAAO,CAC7BA,EAAM,eAAc,EACpBX,GAAQ,EACR,MAAMY,EAAa,EAGnB,MAAMC,EADO,SAAS,cAAc,YAAY,EACxB,sBAAqB,EAAG,OAEhD,OAAO,SAAS,CACd,KAAM,EACN,IAAKA,EAAa,EAClB,SAAU,QACd,CAAC,CACD,CAEA,SAASN,EAAaI,EAAO,CAC3BA,EAAM,eAAc,EACpB,MAAMZ,EAAeY,EAAM,OAAO,SAAS,QAAQ,MAE/CZ,IAAiB,KAIrBC,EAAO,EACPS,EAAeV,EACff,EAAQ,UAAY,GACpB4B,IACF,CAEA,eAAeA,GAAgB,CAC7BN,EAAY,MAAM,QAAU,OAC5BD,EAAO,MAAM,QAAU,QACvB,MAAMS,EAAO,MAAMhB,EAAUW,EAAcT,CAAI,EAC/Bc,EAAK,KAET,SAAW,IACrBR,EAAY,MAAM,QAAU,OAC5BS,EAAS,MAAM,CACb,QAAS,2EACT,SAAU,QAChB,CAAK,GAECf,GAASc,EAAK,UAAYJ,GAC5BK,EAAS,KAAK,CAAE,QAAS,4DAA8D,CAAA,EACvFT,EAAY,MAAM,QAAU,OAC5BD,EAAO,MAAM,QAAU,QAEvBC,EAAY,MAAM,QAAU,QAE5BD,EAAO,MAAM,QAAU,OACvBpB,EAAW6B,EAAK,IAAI,EACpB,SAAS,cAAc,OAAO,EAAE,MAAK,CACzC"}